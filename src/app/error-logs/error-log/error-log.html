<div class="p-4">
    <p-card header="Systeem Foutmeldingen">
        <div class="flex justify-content-end mb-3">
            <p-button 
                label="Logs Wissen" 
                icon="pi pi-trash" 
                severity="secondary" 
                [outlined]="true"
                (onClick)="errorService.clearLogs()"
                [disabled]="errorService.errorLogs().length === 0" />
        </div>

        <p-table 
            [value]="errorService.errorLogs()" 
            [rows]="10" 
            [paginator]="true" 
            responsiveLayout="scroll"
            styleClass="p-datatable-sm p-datatable-gridlines">
            
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="timestamp">Tijdstip <p-sortIcon field="timestamp" /></th>
                    <th pSortableColumn="status">Status <p-sortIcon field="status" /></th>
                    <th>Methode</th>
                    <th>URL</th>
                    <th>Bericht</th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-log>
                <tr>
                    <td>{{ log.timestamp | date:'HH:mm:ss' }}</td>
                    <td>
                        <p-tag 
                            [value]="log.status.toString()" 
                            [severity]="getSeverity(log.status)" />
                    </td>
                    <td><span class="font-bold">{{ log.method }}</span></td>
                    <td><small class="text-color-secondary">{{ log.url }}</small></td>
                    <td class="text-red-500 font-medium">{{ log.message }}</td>
                </tr>
            </ng-template>

            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="5" class="text-center p-4">
                        Geen foutmeldingen gelogd in deze sessie.
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </p-card>
</div>